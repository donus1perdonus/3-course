# Data Analysis Algorithms

Проект содержит реализацию различных заданий по параллельным вычислениям с использованием OpenMP и OpenCL, включая перемножение матриц, вычисление числа π и работу с OpenMP sections.

### Структура проекта
```
.
├─ CMakeLists.txt
├─ Dockerfile
├─ README.md
├─ include/
│  ├─ openmp.h
│  └─ utils.h
├─ src/
│  ├─ openmp.cpp
│  └─ utils.cpp
├─ main.cpp
└─ meta/
   └─ task.txt

```

## Задания

### Задание 1: Перемножение матриц с OpenMP
**Ключевые особенности:**
- **Детерминированная и потокобезопасная инициализация** матриц `A` и `B` без общих ГПСЧ.
- **Предварительное транспонирование `B` → `BT`** для кэш-дружественного доступа (умножение строка-на-строку).
- **Три уровня распараллеливания**:
  - Level 1 (outer): параллелизация по внешнему циклу `i`.
  - Level 2 (middle): параллелизация по среднему циклу `j`.
  - Level 3 (inner): параллелизация по внутреннему циклу `k` с редукцией.
- **Конфигурируемый размер матрицы** через аргумент командной строки (по умолчанию 1000).
- Тестирование производительности с 1, 2, 4, 8 и 16 потоками.

### Задание 2: Вычисление числа π
**Методы вычисления:**
- **Метод Монте-Карло**: использует случайные точки в квадрате для оценки площади единичной окружности.
- **Численное интегрирование**: вычисление интеграла 4/(1+x²) от 0 до 1.
- Автоматическое удвоение количества точек/интервалов до достижения заданной точности.
- Параллелизация вычислений с помощью OpenMP.

### Задание 3: Работа с GPU (OpenCL)
**Подзадания:**
- **3.1**: Вывод информации о подключённых GPU устройствах.
- **3.2**: Перемножение матриц на GPU с использованием OpenCL.

### Задание 4: Использование OpenMP sections
Выполнение четырёх независимых задач параллельно с помощью OpenMP sections:
- **4.1**: Разложение числа n на сумму квадратов (алгоритм Лагранжа).
- **4.2**: Вычисление n чисел Фибоначчи.
- **4.3**: Поиск n-го простого числа.
- **4.4**: Вычисление суммы всех делителей числа n.

Все подзадания выполняются параллельно в отдельных потоках через `#pragma omp parallel sections`.

### Требования
- Компилятор с поддержкой OpenMP (например, `gcc`/`clang` с ключом `-fopenmp`, MSVC с `/openmp`).
- CMake 3.20+ (рекомендуется).

### Сборка (Windows, CMake)
```bash
cmake -S . -B build -DCMAKE_BUILD_TYPE=Release
cmake --build build --config Release -j
```

Собранный исполняемый файл будет находиться в `build/` (например, `build/DAA.exe`).

### Запуск

Программа принимает номер задания в качестве первого аргумента и опциональные флаги.

#### Задание 1: Перемножение матриц
```bash
# Размер матрицы по умолчанию (1000x1000)
./build/DAA.exe 1

# Указать размер матрицы
./build/DAA.exe 1 2000
```

Программа выводит таблицу со временем выполнения и ускорением для каждого уровня параллелизации с разным количеством потоков (1, 2, 4, 8, 16).

#### Задание 2: Вычисление числа π
```bash
# Метод Монте-Карло с параметрами по умолчанию
./build/DAA.exe 2

# Указать точность и количество потоков
./build/DAA.exe 2 0.001 8

# Использовать метод численного интегрирования
./build/DAA.exe 2 0.0001 4 --integration
```

#### Задание 3: Работа с GPU
```bash
# Вывести информацию о GPU устройствах
./build/DAA.exe 3 3.1

# Умножение матриц на GPU
./build/DAA.exe 3 3.2 1000
```

#### Задание 4: OpenMP sections
```bash
# Выполнить все подзадания с n=10 (по умолчанию)
./build/DAA.exe 4

# Указать значение n
./build/DAA.exe 4 25
```

### Основные файлы
- `main.cpp`: CLI обработка аргументов, запуск соответствующих заданий.
- `include/openmp.h`, `src/openmp.cpp`: 
  - Класс `MatrixMultiplier` для задания 1 (инициализация, транспонирование, три уровня умножения).
  - Класс `PiCalculator` для задания 2 (методы Монте-Карло и численного интегрирования).
  - Класс `Task4Calculator` для задания 4 (все подзадания с использованием sections).
- `include/opencl.h`, `src/opencl.cpp`: работа с GPU через OpenCL для задания 3.
- `include/utils.h`, `src/utils.cpp`: утилиты (парсинг аргументов, измерение времени, справка).
- `meta/task.txt`: формулировка всех заданий.

### Примеры использования

**Задание 1: Сравнение производительности разных уровней параллелизации**
```bash
./build/DAA.exe 1 2000
```

**Задание 2: Вычисление π с высокой точностью**
```bash
./build/DAA.exe 2 0.00001 16 --integration
```

**Задание 4: Параллельное выполнение четырёх задач**
```bash
./build/DAA.exe 4 30
```