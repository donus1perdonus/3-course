# PTMS - Probability Theory and Mathematical Statistics

Проект по теории вероятностей и математической статистике. Реализация дискретных случайных величин и моделирование случайных процессов.

## Структура проекта

```
3-course/
├── include/              # Заголовочные файлы
│   ├── random_variable.h
│   ├── visualizer.h
│   ├── random_walk.h
│   └── random_walk_visualizer.h
├── src/                  # Исходные файлы
│   ├── main.cpp
│   ├── random_variable.cpp
│   ├── visualizer.cpp
│   ├── random_walk.cpp
│   └── random_walk_visualizer.cpp
├── libs/                 # Внешние библиотеки
│   └── glfw/            # GLFW для OpenGL
├── build/                # Директория сборки
├── meta/                 # Методические материалы
└── CMakeLists.txt        # Файл конфигурации CMake
```

## Требования

- **Компилятор**: C++17 совместимый (MinGW для Windows, GCC для Linux)
- **CMake**: версия 3.10 или выше
- **Библиотеки**:
  - GLFW3 (включена в проект)
  - OpenGL

## Сборка

### Windows (MinGW)

```bash
mkdir build
cd build
cmake ..
cmake --build .
```

Исполняемый файл будет создан в директории `build/` с именем `PTMS_Project.exe`.

### Linux

```bash
mkdir build
cd build
cmake ..
make
```

Исполняемый файл будет создан в директории `build/` с именем `PTMS_Project`.

## Использование

Программа принимает номер задания в качестве первого аргумента командной строки:

```bash
# Windows
.\build\PTMS_Project.exe <номер_задания>

# Linux
./build/PTMS_Project <номер_задания>
```

### Доступные задания

#### Задание 1.1: Демонстрация функционала DiscreteRandomVariable

```bash
.\build\PTMS_Project.exe 1.1
```

Демонстрирует все возможности класса `DiscreteRandomVariable`:
- Задание распределения в табличном виде
- Умножение ДСВ на скаляр
- Сложение ДСВ
- Умножение ДСВ
- Вычисление математического ожидания, дисперсии, коэффициента асимметрии, коэффициента эксцесса
- Сериализация и десериализация в/из файла
- Отображение в виде закона распределения
- Отображение в виде полилайна
- Отображение в виде функции распределения

#### Задание 1.2: Визуализация ДСВ через OpenGL

```bash
.\build\PTMS_Project.exe 1.2
```

Визуализация дискретной случайной величины в графическом окне:
- Закон распределения (гистограмма)
- Полилайн
- Функция распределения (CDF)

**Управление:**
- `SPACE` - Переключение режима отображения
- `ESC` - Выход

#### Задание 2: Моделирование случайного блуждания

```bash
.\build\PTMS_Project.exe 2
```

Моделирование процесса случайного блуждания точки в ℝ:
- Задание начального положения точки
- Задание количества шагов
- Задание закона перемещения (ДСВ) тремя способами:
  1. Распределение по умолчанию
  2. Загрузка из файла через диалог (десериализация)
  3. Ввод с клавиатуры
- Непрерывная анимация перемещения точки
- Каждый шаг выполняется в течение одной секунды
- Скорость перемещения пропорциональна модулю значения шага
- Отображение распределения вероятностей конечных позиций

**Управление:**
- `SPACE` - Запуск/Пауза
- `R` - Сброс
- `S` - Остановка
- `D` - Показать/скрыть распределение конечных позиций
- `ESC` - Выход

## Реализованные классы

### DiscreteRandomVariable

Класс для работы с дискретными случайными величинами.

**Основные методы:**
- `setDistribution()` - задание распределения
- `operator*()` - умножение на скаляр или другую ДСВ
- `operator+()` - сложение ДСВ
- `expectation()` - математическое ожидание
- `variance()` - дисперсия
- `skewness()` - коэффициент асимметрии
- `kurtosis()` - коэффициент эксцесса
- `serialize()` / `deserialize()` - сериализация в/из файла
- `toString()` - строковое представление закона распределения
- `toPolylineString()` - строковое представление полилайна
- `toCDFString()` - строковое представление функции распределения

### RandomWalk

Класс для моделирования случайного блуждания.

**Основные методы:**
- `setInitialPosition()` - задание начального положения
- `setNumberOfSteps()` - задание количества шагов
- `setStepDistribution()` - задание закона перемещения (ДСВ)
- `start()` - запуск моделирования
- `pause()` / `resume()` - пауза/возобновление
- `stop()` - остановка
- `reset()` - сброс
- `update()` - обновление состояния (вызывается каждый кадр)
- `getFinalPositionDistribution()` - получение распределения конечных позиций

### Visualizer

Класс для визуализации ДСВ через OpenGL.

### RandomWalkVisualizer

Класс для визуализации случайного блуждания через OpenGL.

## Примеры использования

### Создание и работа с ДСВ

```cpp
// Создание ДСВ
std::vector<std::pair<double, double>> dist = {
    {1, 0.1}, {2, 0.2}, {3, 0.4}, {4, 0.2}, {5, 0.1}
};
DiscreteRandomVariable rv;
rv.setDistribution(dist);

// Операции
DiscreteRandomVariable rv2 = rv * 2.0;  // Умножение на скаляр
DiscreteRandomVariable rv3 = rv + rv;    // Сложение
DiscreteRandomVariable rv4 = rv * rv;    // Умножение

// Статистические характеристики
double mean = rv.expectation();
double var = rv.variance();
double skew = rv.skewness();
double kurt = rv.kurtosis();
```

### Сериализация ДСВ

```cpp
// Запись в файл
std::ofstream file("distribution.bin", std::ios::binary);
rv.serialize(file);
file.close();

// Чтение из файла
std::ifstream inFile("distribution.bin", std::ios::binary);
DiscreteRandomVariable rv2;
rv2.deserialize(inFile);
inFile.close();
```

### Моделирование случайного блуждания

```cpp
// Создание закона перемещения
DiscreteRandomVariable stepDist;
stepDist.setDistribution({{-1.0, 0.25}, {0.0, 0.5}, {1.0, 0.25}});

// Создание модели блуждания
RandomWalk walk(0.0, 10, stepDist);

// Запуск
walk.start();

// Обновление (в цикле рендеринга)
while (walk.getIsRunning()) {
    walk.update(deltaTime);
    // ... визуализация ...
}
```

## Формат файлов

Файлы сериализации ДСВ имеют бинарный формат:
- Размер распределения (size_t)
- Пары (значение, вероятность) для каждого элемента

## Лицензия

См. файл LICENSE.

## Автор

Проект выполнен в рамках курса "Теория вероятностей и математическая статистика".
